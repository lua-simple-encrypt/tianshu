# ============================================================================
# MinerU-Server Backend Requirements (Updated for MinerU 2.7.6)
# ============================================================================
# ⚠️ 核心框架 (Torch, Paddle, FlashAttn) 由 Dockerfile 手动管理
#    严禁在此文件中取消注释核心框架，否则会导致依赖地狱！
# ============================================================================

# 1. 基础科学计算 (严格锁定，严禁升级到 2.0.0)
numpy==1.26.4
# 服务器环境推荐 Headless (无 GUI 依赖，更小更稳)
opencv-python-headless>=4.11.0.86
# OCR 几何计算依赖
shapely>=2.0.0
pyclipper>=1.3.0

# 2. MinerU 2.7.6 新增核心依赖
# 这些是 MinerU 新版必须的组件，Dockerfile 会尝试安装，
# 但在此处声明以确保完整性（非 Docker 环境开发需要）
json-repair>=0.46.2
fast-langdetect>=0.2.3
magika>=0.6.2
pdftext>=0.6.3
beautifulsoup4>=4.13.0
# 注意: scikit-image 由 Dockerfile 单独处理以保护 numpy 版本

# 3. Web 服务与 API
fastapi==0.115.6
uvicorn[standard]==0.34.0
python-multipart>=0.0.9
litserve==0.2.16
aiohttp==3.11.11

# 4. 工具库
click>=8.1.7
requests>=2.32.0
loguru>=0.7.0
python-dotenv>=1.0.0
minio>=7.2.0
redis>=5.0.0
# 微软 MarkItDown (文档转换)
markitdown>=0.1.3

# 5. 模型管理
modelscope>=1.18.0
huggingface-hub>=0.23.2

# 6. 安全与认证
pyjwt>=2.9.0
# Pydantic 核心 (固定版本防止 FastAPI 报错)
pydantic==2.10.5
pydantic-core==2.27.2
email-validator>=2.2.0

# 7. MCP 协议
mcp==1.1.2
sse-starlette==2.2.1
jsonschema>=4.20.0
jsonschema-specifications>=2023.12.1

# 8. Python 3.12 兼容性补丁
setuptools>=75.0.0
packaging>=23.2
typing-extensions>=4.12.0
lxml>=5.3.0
regex>=2024.5.15

# 9. 音频处理
funasr>=1.2.7
ffmpeg-python>=0.2.0
soundfile>=0.12.0

# 10. 图像处理补充
PyMuPDF>=1.24.0
Pillow>=11.0.0
img2pdf>=0.5.0
pikepdf>=9.0.0
matplotlib>=3.9.0
contourpy>=1.3.0
kiwisolver>=1.4.5
ftfy>=6.1.0
